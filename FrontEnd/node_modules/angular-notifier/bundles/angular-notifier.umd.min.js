!function(i,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-notifier",["exports","@angular/core","rxjs","@angular/common"],t):t((i="undefined"!=typeof globalThis?globalThis:i||self)["angular-notifier"]={},i.ng.core,i.rxjs,i.ng.common)}(this,(function(i,t,o,n){"use strict";var e=function(i){this.template=null,Object.assign(this,i),void 0===i.id&&(this.id="ID_"+(new Date).getTime())},s=function(i){void 0===i&&(i={}),this.animations={enabled:!0,hide:{easing:"ease",offset:50,preset:"fade",speed:300},overlap:150,shift:{easing:"ease",speed:300},show:{easing:"ease",preset:"slide",speed:300}},this.behaviour={autoHide:7e3,onClick:!1,onMouseover:"pauseAutoHide",showDismissButton:!0,stacking:4},this.position={horizontal:{distance:12,position:"left"},vertical:{distance:12,gap:10,position:"bottom"}},this.theme="material",void 0!==i.theme&&(this.theme=i.theme),void 0!==i.animations&&(void 0!==i.animations.enabled&&(this.animations.enabled=i.animations.enabled),void 0!==i.animations.overlap&&(this.animations.overlap=i.animations.overlap),void 0!==i.animations.hide&&Object.assign(this.animations.hide,i.animations.hide),void 0!==i.animations.shift&&Object.assign(this.animations.shift,i.animations.shift),void 0!==i.animations.show&&Object.assign(this.animations.show,i.animations.show)),void 0!==i.behaviour&&Object.assign(this.behaviour,i.behaviour),void 0!==i.position&&(void 0!==i.position.horizontal&&Object.assign(this.position.horizontal,i.position.horizontal),void 0!==i.position.vertical&&Object.assign(this.position.vertical,i.position.vertical))},a=new t.InjectionToken("[angular-notifier] Notifier Options"),r=new t.InjectionToken("[anuglar-notifier] Notifier Config"),c=function(){function i(){this.actionStream=new o.Subject,this.actionQueue=[],this.isActionInProgress=!1}return i.prototype.push=function(i){this.actionQueue.push(i),this.tryToRunNextAction()},i.prototype.continue=function(){this.isActionInProgress=!1,this.tryToRunNextAction()},i.prototype.tryToRunNextAction=function(){this.isActionInProgress||0===this.actionQueue.length||(this.isActionInProgress=!0,this.actionStream.next(this.actionQueue.shift()))},i}();c.decorators=[{type:t.Injectable}],c.ctorParameters=function(){return[]};var f=function(){function i(i,t){this.queueService=i,this.config=t}return i.prototype.getConfig=function(){return this.config},i.prototype.show=function(i){this.queueService.push({payload:i,type:"SHOW"})},i.prototype.hide=function(i){this.queueService.push({payload:i,type:"HIDE"})},i.prototype.hideNewest=function(){this.queueService.push({type:"HIDE_NEWEST"})},i.prototype.hideOldest=function(){this.queueService.push({type:"HIDE_OLDEST"})},i.prototype.hideAll=function(){this.queueService.push({type:"HIDE_ALL"})},i.prototype.notify=function(i,t,o){var n={message:t,type:i};void 0!==o&&(n.id=o),this.show(n)},i}();f.decorators=[{type:t.Injectable}],f.ctorParameters=function(){return[{type:c},{type:s,decorators:[{type:t.Inject,args:[r]}]}]};var h=function(){function i(i,t,o){var n=this;this.changeDetector=i,this.queueService=t,this.config=o.getConfig(),this.notifications=[],this.queueServiceSubscription=this.queueService.actionStream.subscribe((function(i){n.handleAction(i).then((function(){n.queueService.continue()}))}))}return i.prototype.ngOnDestroy=function(){this.queueServiceSubscription&&this.queueServiceSubscription.unsubscribe()},i.prototype.identifyNotification=function(i,t){return t.id},i.prototype.onNotificationDismiss=function(i){this.queueService.push({payload:i,type:"HIDE"})},i.prototype.onNotificationReady=function(i){var t=this.notifications[this.notifications.length-1];t.component=i,this.continueHandleShowAction(t)},i.prototype.handleAction=function(i){switch(i.type){case"SHOW":return this.handleShowAction(i);case"HIDE":return this.handleHideAction(i);case"HIDE_OLDEST":return this.handleHideOldestAction(i);case"HIDE_NEWEST":return this.handleHideNewestAction(i);case"HIDE_ALL":return this.handleHideAllAction();default:return new Promise((function(i){i()}))}},i.prototype.handleShowAction=function(i){var t=this;return new Promise((function(o){t.tempPromiseResolver=o,t.addNotificationToList(new e(i.payload))}))},i.prototype.continueHandleShowAction=function(i){var t=this,o=this.notifications.length;if(1===o)i.component.show().then(this.tempPromiseResolver);else{if(!1===this.config.behaviour.stacking||this.config.behaviour.stacking<2)this.notifications[0].component.hide().then((function(){t.removeNotificationFromList(t.notifications[0]),i.component.show().then(t.tempPromiseResolver)}));else{var n=[];if(o>this.config.behaviour.stacking){var e=this.notifications.slice(1,o-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(n.push(this.notifications[0].component.hide()),setTimeout((function(){n.push(t.shiftNotifications(e,i.component.getHeight(),!0))}),this.config.animations.hide.speed-this.config.animations.overlap),setTimeout((function(){n.push(i.component.show())}),this.config.animations.hide.speed+this.config.animations.shift.speed-this.config.animations.overlap)):n.push(new Promise((function(o){t.notifications[0].component.hide().then((function(){t.shiftNotifications(e,i.component.getHeight(),!0).then((function(){i.component.show().then(o)}))}))}))):(n.push(this.notifications[0].component.hide()),n.push(this.shiftNotifications(e,i.component.getHeight(),!0)),n.push(i.component.show()))}else{var s=this.notifications.slice(0,o-1);this.config.animations.enabled?!1!==this.config.animations.overlap&&this.config.animations.overlap>0?(n.push(this.shiftNotifications(s,i.component.getHeight(),!0)),setTimeout((function(){n.push(i.component.show())}),this.config.animations.shift.speed-this.config.animations.overlap)):n.push(new Promise((function(o){t.shiftNotifications(s,i.component.getHeight(),!0).then((function(){i.component.show().then(o)}))}))):(n.push(this.shiftNotifications(s,i.component.getHeight(),!0)),n.push(i.component.show()))}Promise.all(n).then((function(){o>t.config.behaviour.stacking&&t.removeNotificationFromList(t.notifications[0]),t.tempPromiseResolver()}))}}},i.prototype.handleHideAction=function(i){var t=this;return new Promise((function(o){var n=[],e=t.findNotificationById(i.payload);if(void 0!==e){var s=t.findNotificationIndexById(i.payload);if(void 0!==s){var a=t.notifications.slice(0,s);a.length>0?t.config.animations.enabled&&t.config.animations.hide.speed>0?!1!==t.config.animations.overlap&&t.config.animations.overlap>0?(n.push(e.component.hide()),setTimeout((function(){n.push(t.shiftNotifications(a,e.component.getHeight(),!1))}),t.config.animations.hide.speed-t.config.animations.overlap)):e.component.hide().then((function(){n.push(t.shiftNotifications(a,e.component.getHeight(),!1))})):(n.push(e.component.hide()),n.push(t.shiftNotifications(a,e.component.getHeight(),!1))):n.push(e.component.hide()),Promise.all(n).then((function(){t.removeNotificationFromList(e),o()}))}else o()}else o()}))},i.prototype.handleHideOldestAction=function(i){return 0===this.notifications.length?new Promise((function(i){i()})):(i.payload=this.notifications[0].id,this.handleHideAction(i))},i.prototype.handleHideNewestAction=function(i){return 0===this.notifications.length?new Promise((function(i){i()})):(i.payload=this.notifications[this.notifications.length-1].id,this.handleHideAction(i))},i.prototype.handleHideAllAction=function(){var i=this;return new Promise((function(t){var o=i.notifications.length;if(0!==o)if(i.config.animations.enabled&&i.config.animations.hide.speed>0&&!1!==i.config.animations.hide.offset&&i.config.animations.hide.offset>0)for(var n=function(n){var e="top"===i.config.position.vertical.position?o-1:n;setTimeout((function(){i.notifications[n].component.hide().then((function(){("top"===i.config.position.vertical.position&&0===n||"bottom"===i.config.position.vertical.position&&n===o-1)&&(i.removeAllNotificationsFromList(),t())}))}),i.config.animations.hide.offset*e)},e=o-1;e>=0;e--)n(e);else{var s=[];for(e=o-1;e>=0;e--)s.push(i.notifications[e].component.hide());Promise.all(s).then((function(){i.removeAllNotificationsFromList(),t()}))}else t()}))},i.prototype.shiftNotifications=function(i,t,o){return new Promise((function(n){if(0!==i.length){for(var e=[],s=i.length-1;s>=0;s--)e.push(i[s].component.shift(t,o));Promise.all(e).then(n)}else n()}))},i.prototype.addNotificationToList=function(i){this.notifications.push(i),this.changeDetector.markForCheck()},i.prototype.removeNotificationFromList=function(i){this.notifications=this.notifications.filter((function(t){return t.component!==i.component})),this.changeDetector.markForCheck()},i.prototype.removeAllNotificationsFromList=function(){this.notifications=[],this.changeDetector.markForCheck()},i.prototype.findNotificationById=function(i){return this.notifications.find((function(t){return t.id===i}))},i.prototype.findNotificationIndexById=function(i){var t=this.notifications.findIndex((function(t){return t.id===i}));return-1!==t?t:void 0},i}();h.decorators=[{type:t.Component,args:[{changeDetection:t.ChangeDetectionStrategy.OnPush,host:{class:"notifier__container"},selector:"notifier-container",template:'<ul class="notifier__container-list">\n  <li class="notifier__container-list-item" *ngFor="let notification of notifications; trackBy: identifyNotification">\n    <notifier-notification [notification]="notification" (ready)="onNotificationReady($event)" (dismiss)="onNotificationDismiss($event)">\n    </notifier-notification>\n  </li>\n</ul>\n'}]}],h.ctorParameters=function(){return[{type:t.ChangeDetectorRef},{type:c},{type:f}]};var p={hide:function(){return{from:{opacity:"1"},to:{opacity:"0"}}},show:function(){return{from:{opacity:"0"},to:{opacity:"1"}}}},u={hide:function(i){var t,o,n=i.component.getConfig(),e=i.component.getShift();if("left"===n.position.horizontal.position)t={transform:"translate3d( 0, "+e+"px, 0 )"},o={transform:"translate3d( calc( -100% - "+n.position.horizontal.distance+"px - 10px ), "+e+"px, 0 )"};else if("right"===n.position.horizontal.position)t={transform:"translate3d( 0, "+e+"px, 0 )"},o={transform:"translate3d( calc( 100% + "+n.position.horizontal.distance+"px + 10px ), "+e+"px, 0 )"};else{t={transform:"translate3d( -50%, "+e+"px, 0 )"},o={transform:"translate3d( -50%, "+("top"===n.position.vertical.position?"calc( -100% - "+n.position.horizontal.distance+"px - 10px )":"calc( 100% + "+n.position.horizontal.distance+"px + 10px )")+", 0 )"}}return{from:t,to:o}},show:function(i){var t,o,n=i.component.getConfig();if("left"===n.position.horizontal.position)t={transform:"translate3d( calc( -100% - "+n.position.horizontal.distance+"px - 10px ), 0, 0 )"},o={transform:"translate3d( 0, 0, 0 )"};else if("right"===n.position.horizontal.position)t={transform:"translate3d( calc( 100% + "+n.position.horizontal.distance+"px + 10px ), 0, 0 )"},o={transform:"translate3d( 0, 0, 0 )"};else{t={transform:"translate3d( -50%, "+("top"===n.position.vertical.position?"calc( -100% - "+n.position.horizontal.distance+"px - 10px )":"calc( 100% + "+n.position.horizontal.distance+"px + 10px )")+", 0 )"},o={transform:"translate3d( -50%, 0, 0 )"}}return{from:t,to:o}}},m=function(){function i(){this.animationPresets={fade:p,slide:u}}return i.prototype.getAnimationData=function(i,t){var o,n,e;return"show"===i?(o=this.animationPresets[t.component.getConfig().animations.show.preset].show(t),n=t.component.getConfig().animations.show.speed,e=t.component.getConfig().animations.show.easing):(o=this.animationPresets[t.component.getConfig().animations.hide.preset].hide(t),n=t.component.getConfig().animations.hide.speed,e=t.component.getConfig().animations.hide.easing),{keyframes:[o.from,o.to],options:{duration:n,easing:e,fill:"forwards"}}},i}();m.decorators=[{type:t.Injectable}],m.ctorParameters=function(){return[]};var l=function(){function i(){this.now=0,this.remaining=0}return i.prototype.start=function(i){var t=this;return new Promise((function(o){t.remaining=i,t.finishPromiseResolver=o,t.continue()}))},i.prototype.pause=function(){clearTimeout(this.timerId),this.remaining-=(new Date).getTime()-this.now},i.prototype.continue=function(){var i=this;this.now=(new Date).getTime(),this.timerId=window.setTimeout((function(){i.finish()}),this.remaining)},i.prototype.stop=function(){clearTimeout(this.timerId),this.remaining=0},i.prototype.finish=function(){this.finishPromiseResolver()},i}();l.decorators=[{type:t.Injectable}],l.ctorParameters=function(){return[]};var d=function(){function i(i,o,n,e,s){this.config=n.getConfig(),this.ready=new t.EventEmitter,this.dismiss=new t.EventEmitter,this.timerService=e,this.animationService=s,this.renderer=o,this.element=i.nativeElement,this.elementShift=0}return i.prototype.ngAfterViewInit=function(){this.setup(),this.elementHeight=this.element.offsetHeight,this.elementWidth=this.element.offsetWidth,this.ready.emit(this)},i.prototype.getConfig=function(){return this.config},i.prototype.getHeight=function(){return this.elementHeight},i.prototype.getWidth=function(){return this.elementWidth},i.prototype.getShift=function(){return this.elementShift},i.prototype.show=function(){var i=this;return new Promise((function(t){if(i.config.animations.enabled&&i.config.animations.show.speed>0){for(var o=i.animationService.getAnimationData("show",i.notification),n=Object.keys(o.keyframes[0]),e=n.length-1;e>=0;e--)i.renderer.setStyle(i.element,n[e],o.keyframes[0][n[e]]);i.renderer.setStyle(i.element,"visibility","visible"),i.element.animate(o.keyframes,o.options).onfinish=function(){i.startAutoHideTimer(),t()}}else i.renderer.setStyle(i.element,"visibility","visible"),i.startAutoHideTimer(),t()}))},i.prototype.hide=function(){var i=this;return new Promise((function(t){if(i.stopAutoHideTimer(),i.config.animations.enabled&&i.config.animations.hide.speed>0){var o=i.animationService.getAnimationData("hide",i.notification);i.element.animate(o.keyframes,o.options).onfinish=function(){t()}}else t()}))},i.prototype.shift=function(i,t){var o=this;return new Promise((function(n){var e;e="top"===o.config.position.vertical.position&&t||"bottom"===o.config.position.vertical.position&&!t?o.elementShift+i+o.config.position.vertical.gap:o.elementShift-i-o.config.position.vertical.gap;var s="middle"===o.config.position.horizontal.position?"-50%":"0";if(o.config.animations.enabled&&o.config.animations.shift.speed>0){var a={keyframes:[{transform:"translate3d( "+s+", "+o.elementShift+"px, 0 )"},{transform:"translate3d( "+s+", "+e+"px, 0 )"}],options:{duration:o.config.animations.shift.speed,easing:o.config.animations.shift.easing,fill:"forwards"}};o.elementShift=e,o.element.animate(a.keyframes,a.options).onfinish=function(){n()}}else o.renderer.setStyle(o.element,"transform","translate3d( "+s+", "+e+"px, 0 )"),o.elementShift=e,n()}))},i.prototype.onClickDismiss=function(){this.dismiss.emit(this.notification.id)},i.prototype.onNotificationMouseover=function(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.pauseAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.stopAutoHideTimer()},i.prototype.onNotificationMouseout=function(){"pauseAutoHide"===this.config.behaviour.onMouseover?this.continueAutoHideTimer():"resetAutoHide"===this.config.behaviour.onMouseover&&this.startAutoHideTimer()},i.prototype.onNotificationClick=function(){"hide"===this.config.behaviour.onClick&&this.onClickDismiss()},i.prototype.startAutoHideTimer=function(){var i=this;!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.start(this.config.behaviour.autoHide).then((function(){i.onClickDismiss()}))},i.prototype.pauseAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.pause()},i.prototype.continueAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.continue()},i.prototype.stopAutoHideTimer=function(){!1!==this.config.behaviour.autoHide&&this.config.behaviour.autoHide>0&&this.timerService.stop()},i.prototype.setup=function(){"left"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"left",this.config.position.horizontal.distance+"px"):"right"===this.config.position.horizontal.position?this.renderer.setStyle(this.element,"right",this.config.position.horizontal.distance+"px"):(this.renderer.setStyle(this.element,"left","50%"),this.renderer.setStyle(this.element,"transform","translate3d( -50%, 0, 0 )")),"top"===this.config.position.vertical.position?this.renderer.setStyle(this.element,"top",this.config.position.vertical.distance+"px"):this.renderer.setStyle(this.element,"bottom",this.config.position.vertical.distance+"px"),this.renderer.addClass(this.element,"notifier__notification--"+this.notification.type),this.renderer.addClass(this.element,"notifier__notification--"+this.config.theme)},i}();function g(i){return new s(i)}function v(){return new s({})}d.decorators=[{type:t.Component,args:[{changeDetection:t.ChangeDetectionStrategy.OnPush,host:{"(click)":"onNotificationClick()","(mouseout)":"onNotificationMouseout()","(mouseover)":"onNotificationMouseover()",class:"notifier__notification"},providers:[l],selector:"notifier-notification",template:'<ng-container\n  *ngIf="notification.template; else predefinedNotification"\n  [ngTemplateOutlet]="notification.template"\n  [ngTemplateOutletContext]="{ notification: notification }"\n>\n</ng-container>\n\n<ng-template #predefinedNotification>\n  <p class="notifier__notification-message">{{ notification.message }}</p>\n  <button\n    class="notifier__notification-button"\n    type="button"\n    title="dismiss"\n    *ngIf="config.behaviour.showDismissButton"\n    (click)="onClickDismiss()"\n  >\n    <svg class="notifier__notification-button-icon" viewBox="0 0 24 24" width="20" height="20">\n      <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />\n    </svg>\n  </button>\n</ng-template>\n'}]}],d.ctorParameters=function(){return[{type:t.ElementRef},{type:t.Renderer2},{type:f},{type:l},{type:m}]},d.propDecorators={notification:[{type:t.Input}],ready:[{type:t.Output}],dismiss:[{type:t.Output}]};var y=function(){function i(){}return i.withConfig=function(t){return void 0===t&&(t={}),{ngModule:i,providers:[{provide:a,useValue:t},{deps:[a],provide:r,useFactory:g}]}},i}();y.decorators=[{type:t.NgModule,args:[{declarations:[h,d],exports:[h],imports:[n.CommonModule],providers:[m,f,c,{provide:r,useFactory:v}]}]}],i.NotifierConfig=s,i.NotifierConfigToken=r,i.NotifierContainerComponent=h,i.NotifierModule=y,i.NotifierNotificationComponent=d,i.NotifierOptionsToken=a,i.NotifierService=f,i.notifierCustomConfigFactory=g,i.notifierDefaultConfigFactory=v,i.ɵa=c,i.ɵb=l,i.ɵc=m,Object.defineProperty(i,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-notifier.umd.min.js.map